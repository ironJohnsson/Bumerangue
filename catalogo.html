<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cat√°logo - Bumerangue</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{--verde:#2e8b57;--verde-esc:#256b46;--fundo:#fffaf0;--card:#f8f8f8;}
*{box-sizing:border-box}
body{font-family:"Roboto",sans-serif;background:var(--fundo);color:#333;margin:0}
header,footer{background:var(--verde);color:#fff;padding:15px;text-align:center}
nav a{margin:0 15px;color:#fff;text-decoration:none;font-weight:700}
nav a:hover{color:#ffeb3b}
button{cursor:pointer;font-weight:700;border:none;border-radius:8px;transition:.2s}
.categoria-btn{background:var(--verde);color:#fff;padding:12px 16px;margin:10px auto;display:block;width:220px}
.categoria-btn:hover{background:var(--verde-esc)}
.sub-btn{background:#fff;border:2px solid var(--verde);color:var(--verde);padding:8px 12px;margin:5px;border-radius:6px}
.sub-btn:hover{background:var(--verde);color:#fff}
.subcategoria-container{display:none;justify-content:center;flex-wrap:wrap}
.catalogo{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;padding:20px}
@media(max-width:900px){.catalogo{grid-template-columns:repeat(2,1fr)}}
@media(max-width:600px){.catalogo{grid-template-columns:1fr}}
.produto{background:var(--card);border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.1);overflow:hidden;text-align:center;transition:transform .18s}
.produto:hover{transform:scale(1.03)}
.produto img{width:100%;height:200px;object-fit:cover}
.produto h3{color:var(--verde);margin:10px 0}
.produto p{padding:0 10px 15px;color:#666}
#tabelaPrecos{max-width:600px;margin:30px auto;background:var(--card);border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.1);padding:15px;display:none}
#tabelaPrecos h3{color:var(--verde);text-align:center;margin-bottom:10px}
#carrinhoBtn{position:fixed;right:20px;bottom:20px;background:var(--verde);color:#fff;border-radius:50%;width:60px;height:60px;border:none;font-size:22px;box-shadow:0 8px 20px rgba(0,0,0,.25)}
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:32px;background:#111;color:#fff;padding:12px 18px;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,.3);z-index:1200;opacity:0;pointer-events:none;transition:opacity .2s,transform .2s}
.toast.show{opacity:1;transform:translateX(-50%) translateY(-6px);pointer-events:auto}
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.45);justify-content:center;align-items:center;padding:20px}
.modal.show{display:flex}
.modal-card{background:#fff;border-radius:12px;padding:20px;max-width:480px;width:100%;box-shadow:0 10px 25px rgba(0,0,0,.25);position:relative;text-align:center}
.close{position:absolute;right:14px;top:10px;font-size:20px;color:var(--verde);cursor:pointer;font-weight:700}
.close:hover{color:var(--verde-esc)}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:8px;text-align:center;border-bottom:1px solid #eee}
th{background:var(--verde);color:#fff}
.status-disponivel{color:green;font-weight:700}
.status-indisponivel{color:red;font-weight:700}
#qrCode{margin:10px auto;display:block}
</style>
</head>
<body>
<header>
  <h1>Cat√°logo Bumerangue</h1>
  <nav>
    <a href="index.html">In√≠cio</a>
    <a href="catalogo.html">Cat√°logo</a>
    <a href="sobre.html">Sobre</a>
    <a href="contato.html">Contato</a>
  </nav>
</header>

<main>
  <div id="tabelaPrecos">
    <h3>Tabela de Pre√ßos (padr√£o para todos os sabores)</h3>
    <table>
      <thead><tr><th>Tamanho</th><th>Pre√ßo</th></tr></thead>
      <tbody>
        <tr><td>280ml</td><td>R$ 30,00</td></tr>
        <tr><td>500ml</td><td>R$ 55,00</td></tr>
        <tr><td>750ml</td><td>R$ 80,00</td></tr>
        <tr><td>1L</td><td>R$ 100,00</td></tr>
      </tbody>
    </table>
  </div>

  <div id="categorias">
    <button class="categoria-btn" data-cat="Bebidas">üç∏ Bebidas</button>
    <div class="subcategoria-container" id="sub-bebidas">
      <button class="sub-btn" data-aba="Releitura dos Cl√°ssicos">Releitura dos Cl√°ssicos</button>
      <button class="sub-btn" data-aba="Frutas">Frutas</button>
      <button class="sub-btn" data-aba="Sabores Brasileiros">Sabores Brasileiros</button>
    </div>

    <button class="categoria-btn" data-cat="Sabonetes">üßº Sabonetes</button>
    <div class="subcategoria-container" id="sub-sabonetes">
      <button class="sub-btn" data-aba="Sabonetes">Sabonetes</button>
    </div>

    <button class="categoria-btn" data-cat="Doces">üç¨ Doces</button>
    <div class="subcategoria-container" id="sub-doces">
      <button class="sub-btn" data-aba="Doces">Doces</button>
    </div>
  </div>

  <div id="catalogo" class="catalogo"></div>
</main>

<footer><p>&copy; 2025 Bumerangue - Bebidas Artesanais</p></footer>

<button id="carrinhoBtn" title="Ver carrinho">üõí</button>
<div id="toast" class="toast"></div>

<!-- Modal QR -->
<div id="qrModal" class="modal">
  <div class="modal-card">
    <span class="close" id="closeQr">&times;</span>
    <h3>Pagamento via Pix</h3>
    <p>Escaneie o QR Code para pagar</p>
    <img id="qrCode" width="200" height="200" alt="QR Code Pix">
    <p id="valorQr"></p>
  </div>
</div>

<script>
const SHEET_ID = "19c63mlSybEumd2qgRciqTOzuXtCs_5eYEa5jXTylKyQ";
const precos = {"280ml":30,"500ml":55,"750ml":80,"1L":100};
const categorias = {Bebidas:["Releitura dos Cl√°ssicos","Frutas","Sabores Brasileiros"],Sabonetes:["Sabonetes"],Doces:["Doces"]};
const catalogo=document.getElementById('catalogo'), tabela=document.getElementById('tabelaPrecos');
let carrinho=[];

function showToast(msg){const t=document.getElementById("toast");t.textContent=msg;t.classList.add("show");setTimeout(()=>t.classList.remove("show"),3000);}

//=== categorias
document.querySelectorAll(".categoria-btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll(".subcategoria-container").forEach(div=>div.style.display="none");
    const alvo=document.getElementById("sub-"+btn.dataset.cat.toLowerCase());
    if(alvo) alvo.style.display="flex";
    catalogo.innerHTML="";
    tabela.style.display = btn.dataset.cat==="Bebidas"?"block":"none";
  });
});

document.querySelectorAll(".sub-btn").forEach(sub=>{
  sub.addEventListener("click",()=>carregarAba(sub.dataset.aba));
});

//=== carregar produtos
async function carregarAba(aba){
  catalogo.innerHTML="<p style='text-align:center'>‚è≥ Carregando "+aba+"...</p>";
  const url=`https://opensheet.elk.sh/${SHEET_ID}/${encodeURIComponent(aba)}`;
  try{
    const resp=await fetch(url);const dados=await resp.json();catalogo.innerHTML="";
    const bebidas=["Releitura dos Cl√°ssicos","Frutas","Sabores Brasileiros"].includes(aba);
    dados.forEach(d=>{
      const div=document.createElement("div");div.className="produto";
      if(bebidas){
        div.innerHTML=`<img src="${d.imagem||'https://via.placeholder.com/400x200'}"><h3>${d.nome}</h3><p>${d.descricao||''}</p>
        <table><thead><tr><th>Tamanho</th><th>Qtde</th></tr></thead>
        <tbody>
        <tr><td>280ml</td><td>${d["280ml"]||'-'}</td></tr>
        <tr><td>500ml</td><td>${d["500ml"]||'-'}</td></tr>
        <tr><td>750ml</td><td>${d["750ml"]||'-'}</td></tr>
        <tr><td>1L</td><td>${d["1L"]||'-'}</td></tr>
        <tr><td>N√£o engarrafado</td><td>${d["nao_engarrafado"]||'-'}</td></tr></tbody></table>`;
      }else{
        div.innerHTML=`<img src="${d.imagem||'https://via.placeholder.com/400x200'}"><h3>${d.nome}</h3>
        <p>${d.descricao||''}</p><p><strong>Estoque:</strong> ${d.estoque||'-'}</p>
        <p><strong>Pre√ßo:</strong> R$ ${d.preco||'-'}</p>`;
      }
      catalogo.appendChild(div);
    });
  }catch(e){catalogo.innerHTML=`<p style="color:red;text-align:center">Erro ao carregar ${aba}</p>`;}
}

//=== carrinho e QR
document.getElementById("carrinhoBtn").addEventListener("click",()=>{
  if(carrinho.length===0){showToast("Carrinho vazio");return;}
  const total=carrinho.reduce((s,c)=>s+c.preco,0);
  const qr=document.getElementById("qrCode");
  const valor=document.getElementById("valorQr");
  const qrUrl=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=Pix%20Bumerangue%20R$${total}`;
  qr.src=qrUrl;valor.textContent=`Total: R$ ${total},00`;
  document.getElementById("qrModal").classList.add("show");
});
document.getElementById("closeQr").onclick=()=>document.getElementById("qrModal").classList.remove("show");
window.onclick=e=>{if(e.target===document.getElementById("qrModal"))document.getElementById("qrModal").classList.remove("show");};
</script>
</body>
</html>
