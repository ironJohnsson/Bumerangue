<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bumerangue - Cat√°logo</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{--verde:#2e8b57;--verde-esc:#256b46;--fundo:#fffaf0;--card:#f8f8f8;}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:"Roboto",sans-serif;background:var(--fundo);color:#333}
header,footer{background:var(--verde);color:#fff;text-align:center;padding:20px 10px}
nav{display:flex;justify-content:center;gap:40px;margin-top:10px}
nav a{color:#fff;text-decoration:none;font-weight:700;font-size:18px;padding:12px 24px;border-radius:6px;transition:.2s;background:var(--verde-esc)}
nav a:hover,nav a.active{background:#1c4f32;color:#ffeb3b}
section{display:none;padding:30px}
section.active{display:block}
button{cursor:pointer;font-weight:700;border:none;border-radius:8px;transition:.2s}
.categoria-btn{background:var(--verde);color:#fff;padding:14px 20px;margin:10px auto;display:block;width:240px;font-size:17px}
.categoria-btn:hover{background:var(--verde-esc)}
.sub-btn{background:#fff;border:2px solid var(--verde);color:var(--verde);padding:8px 12px;margin:5px;border-radius:6px}
.sub-btn:hover{background:var(--verde);color:#fff}
.subcategoria-container{display:none;justify-content:center;flex-wrap:wrap}
.catalogo{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;padding:20px}
.produto{background:var(--card);border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.1);overflow:hidden;text-align:center;transition:transform .18s}
.produto:hover{transform:scale(1.03)}
.produto img{width:100%;height:200px;object-fit:cover}
.produto h3{color:var(--verde);margin:10px 0}
.produto p{padding:0 10px 10px;color:#666}
.add-btn{background:var(--verde);color:#fff;padding:8px 12px;margin-bottom:10px}
.add-btn:hover{background:var(--verde-esc)}
.add-btn:disabled{background:gray;cursor:not-allowed}
#tabelaPrecos{max-width:600px;margin:30px auto;background:var(--card);border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.1);padding:15px;display:none}
#tabelaPrecos h3{color:var(--verde);text-align:center;margin-bottom:10px}
#carrinhoBtn{position:fixed;right:20px;bottom:20px;background:var(--verde);color:#fff;border-radius:50%;width:60px;height:60px;border:none;font-size:22px;box-shadow:0 8px 20px rgba(0,0,0,.25)}
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:32px;background:#111;color:#fff;padding:12px 18px;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,.3);z-index:1200;opacity:0;pointer-events:none;transition:opacity .2s,transform .2s}
.toast.show{opacity:1;transform:translateX(-50%) translateY(-6px);pointer-events:auto}
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.45);justify-content:center;align-items:center;padding:20px}
.modal.show{display:flex}
.modal-card{background:#fff;border-radius:12px;padding:20px;max-width:480px;width:100%;box-shadow:0 10px 25px rgba(0,0,0,.25);position:relative;text-align:center}
.close{position:absolute;right:14px;top:10px;font-size:20px;color:var(--verde);cursor:pointer;font-weight:700}
.close:hover{color:var(--verde-esc)}
</style>
</head>
<body>

<header>
  <h1>Bumerangue</h1>
  <nav>
    <a href="#" class="aba active" data-aba="inicio">In√≠cio</a>
    <a href="#" class="aba" data-aba="catalogo">Cat√°logo</a>
    <a href="#" class="aba" data-aba="sobre">Sobre</a>
    <a href="#" class="aba" data-aba="contato">Contato</a>
  </nav>
</header>

<main>
  <!-- In√≠cio -->
  <section id="inicio" class="active">
    <h2>Bem-vindo √† Bumerangue</h2>
    <p>Explore nossos produtos artesanais!</p>
  </section>

  <!-- Cat√°logo -->
  <section id="catalogo">
    <div id="tabelaPrecos">
      <h3>Tabela de Pre√ßos</h3>
      <table>
        <thead><tr><th>Tamanho</th><th>Pre√ßo</th></tr></thead>
        <tbody>
          <tr><td>280ml</td><td>R$ 30</td></tr>
          <tr><td>500ml</td><td>R$ 55</td></tr>
          <tr><td>750ml</td><td>R$ 80</td></tr>
          <tr><td>1L</td><td>R$ 100</td></tr>
        </tbody>
      </table>
    </div>

    <div id="categorias">
      <button class="categoria-btn" data-cat="Bebidas">üç∏ Bebidas</button>
      <div class="subcategoria-container" id="sub-bebidas">
        <button class="sub-btn" data-aba="Releitura dos Cl√°ssicos">Releitura dos Cl√°ssicos</button>
        <button class="sub-btn" data-aba="Frutas">Frutas</button>
        <button class="sub-btn" data-aba="Sabores Brasileiros">Sabores Brasileiros</button>
      </div>
      <button class="categoria-btn" data-cat="Sabonetes">üßº Sabonetes</button>
      <div class="subcategoria-container" id="sub-sabonetes">
        <button class="sub-btn" data-aba="Sabonetes">Sabonetes</button>
      </div>
    </div>

    <div id="catalogoProdutos" class="catalogo"></div>
  </section>

  <!-- Sobre -->
  <section id="sobre">
    <h2>Sobre n√≥s</h2>
    <p>Produzimos bebidas artesanais e produtos naturais com qualidade e tradi√ß√£o.</p>
  </section>

  <!-- Contato -->
  <section id="contato">
    <h2>Contato</h2>
    <p>Email: contato@bumerangue.com</p>
    <p>Instagram: @bumerangueartesanal</p>
  </section>
</main>

<footer><p>&copy; 2025 Bumerangue - Todos os direitos reservados</p></footer>

<button id="carrinhoBtn" title="Ver carrinho">üõí</button>
<div id="toast" class="toast"></div>

<!-- Modal QR -->
<div id="qrModal" class="modal">
  <div class="modal-card">
    <span class="close" id="closeQr">&times;</span>
    <h3>Pagamento via Pix</h3>
    <p>Escaneie o QR Code para pagar</p>
    <img id="qrCode" width="200" height="200" alt="QR Code Pix">
    <p id="valorQr"></p>
  </div>
</div>

<script>
const SHEET_ID = "19c63mlSybEumd2qgRciqTOzuXtCs_5eYEa5jXTylKyQ";
const precos = {"280ml":30,"500ml":55,"750ml":80,"1L":100};
let carrinho = [];
const catalogo = document.getElementById('catalogoProdutos');

//=== abas
document.querySelectorAll('.aba').forEach(link=>{
  link.addEventListener('click',e=>{
    e.preventDefault();
    document.querySelectorAll('.aba').forEach(a=>a.classList.remove('active'));
    document.querySelectorAll('section').forEach(sec=>sec.classList.remove('active'));
    link.classList.add('active');
    document.getElementById(link.dataset.aba).classList.add('active');
  });
});

//=== categorias
document.querySelectorAll(".categoria-btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll(".subcategoria-container").forEach(div=>div.style.display="none");
    const alvo=document.getElementById("sub-"+btn.dataset.cat.toLowerCase());
    if(alvo) alvo.style.display="flex";
    document.getElementById("tabelaPrecos").style.display = btn.dataset.cat==="Bebidas"?"block":"none";
  });
});

document.querySelectorAll(".sub-btn").forEach(sub=>{
  sub.addEventListener("click",()=>carregarAba(sub.dataset.aba));
});

async function carregarAba(aba){
  catalogo.innerHTML=`<p style='text-align:center'>‚è≥ Carregando ${aba}...</p>`;
  const url=`https://opensheet.elk.sh/${SHEET_ID}/${encodeURIComponent(aba)}`;
  try{
    const resp=await fetch(url);
    const dados=await resp.json();
    catalogo.innerHTML="";
    const bebidas=["Releitura dos Cl√°ssicos","Frutas","Sabores Brasileiros"].includes(aba);
    dados.forEach(d=>{
      const div=document.createElement("div");
      div.className="produto";
      let disponivel = true;
      let preco = 0;

      if(bebidas){
        const qtds = [d["280ml"],d["500ml"],d["750ml"],d["1L"]];
        const todasZero = qtds.every(v=>!v || v==="0");
        disponivel = !todasZero;
        preco = precos["500ml"]; // pre√ßo m√©dio
        div.innerHTML = `
          <img src="${d.imagem||'https://via.placeholder.com/400x200'}">
          <h3>${d.nome}</h3>
          <p>${d.descricao||''}</p>
          <table><thead><tr><th>Tamanho</th><th>Qtd</th></tr></thead>
          <tbody>
            <tr><td>280ml</td><td>${d["280ml"]||'-'}</td></tr>
            <tr><td>500ml</td><td>${d["500ml"]||'-'}</td></tr>
            <tr><td>750ml</td><td>${d["750ml"]||'-'}</td></tr>
            <tr><td>1L</td><td>${d["1L"]||'-'}</td></tr>
          </tbody></table>
          <button class="add-btn" ${!disponivel?'disabled':''}>${disponivel?'Adicionar ao carrinho':'Indispon√≠vel'}</button>
        `;
      }else{
        disponivel = d.estoque>0;
        preco = parseFloat(d.preco||0);
        div.innerHTML = `
          <img src="${d.imagem||'https://via.placeholder.com/400x200'}">
          <h3>${d.nome}</h3>
          <p>${d.descricao||''}</p>
          <p><strong>Pre√ßo:</strong> R$ ${preco}</p>
          <p><strong>Estoque:</strong> ${disponivel?d.estoque:'Indispon√≠vel'}</p>
          <button class="add-btn" ${!disponivel?'disabled':''}>${disponivel?'Adicionar ao carrinho':'Indispon√≠vel'}</button>
        `;
      }

      div.querySelector(".add-btn").addEventListener("click",()=>{
        carrinho.push({nome:d.nome,preco:preco});
        showToast(`${d.nome} adicionado ao carrinho!`);
      });

      catalogo.appendChild(div);
    });
  }catch(e){
    catalogo.innerHTML=`<p style="color:red;text-align:center">Erro ao carregar ${aba}</p>`;
  }
}

//=== carrinho e QR
document.getElementById("carrinhoBtn").addEventListener("click",()=>{
  if(carrinho.length===0){showToast("Carrinho vazio");return;}
  const total=carrinho.reduce((s,c)=>s+c.preco,0);
  const qr=document.getElementById("qrCode");
  const valor=document.getElementById("valorQr");
  const qrUrl=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=Pix%20Bumerangue%20R$${total}`;
  qr.src=qrUrl;valor.textContent=`Total: R$ ${total},00`;
  document.getElementById("qrModal").classList.add("show");
});
document.getElementById("closeQr").onclick=()=>document.getElementById("qrModal").classList.remove("show");
window.onclick=e=>{if(e.target===document.getElementById("qrModal"))document.getElementById("qrModal").classList.remove("show");};

function showToast(msg){
  const t=document.getElementById("toast");
  t.textContent=msg;t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),3000);
}
</script>
</body>
</html>
